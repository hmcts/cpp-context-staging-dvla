{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "http://justice.gov.uk/json/schemas/domains/stagingdvla/stagingdvla.query.drivernumber.json",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "driver",
    "entitlement",
    "testPass",
    "endorsements"
  ],
  "properties": {
    "driver": {
      "type": "object",
      "additionalProperties": false,
      "description": "driver details for a given driver number",
      "required": [
        "drivingLicenceNumber",
        "lastName",
        "gender"
      ],
      "properties": {
        "drivingLicenceNumber": {
          "type": "string",
          "example": "ABCDE123456AB1AB",
          "description": "A UK driving licence number"
        },
        "firstNames": {
          "type": "string",
          "example": "John",
          "description": "first name(s) of a driver"
        },
        "lastName": {
          "type": "string",
          "example": "Doe",
          "description": "last name of a driver"
        },
        "title": {
          "type": "string",
          "example": "Mr",
          "description": "Title in full mode of address, e.g. Mr, Miss, Lord."
        },
        "nameFormat": {
          "type": "string",
          "description": "Instructions for formatting of the full mode of address from names and titles. E.g. With Title.",
          "enum": [
            "With title",
            "No title",
            "Only title"
          ]
        },
        "fullModeOfAddress": {
          "type": "string",
          "example": "Mr John Doe",
          "description": "Full mode of address of a driver"
        },
        "gender": {
          "type": "string",
          "enum": [
            "Male",
            "Female"
          ]
        },
        "dateOfBirth": {
          "type": "string",
          "description": "The driver's date of birth.",
          "format": "date",
          "maxLength": 10,
          "minLength": 4,
          "example": "1980-09-08"
        },
        "placeOfBirth": {
          "type": "string",
          "example": "Wales",
          "description": "Place of birth of driver"
        },
        "address": {
          "type": "object",
          "properties": {
            "unstructuredAddress": {
              "type": "object",
              "properties": {
                "line1": {
                  "type": "string",
                  "example": "DVLA Long View Rd"
                },
                "line2": {
                  "type": "string",
                  "example": "Morriston"
                },
                "line3": {
                  "type": "string",
                  "example": "Clase"
                },
                "line4": {
                  "type": "string",
                  "example": "Swansea"
                },
                "line5": {
                  "type": "string",
                  "example": "West Glamorgan"
                },
                "postcode": {
                  "type": "string",
                  "example": "SA6 7JL"
                }
              }
            }
          }
        },
        "disqualifiedUntil": {
          "type": "string",
          "format": "date",
          "maxLength": 10,
          "minLength": 10,
          "description": "Date in format YYYY-MM-DD",
          "example": "2019-12-31"
        },
        "disqualifiedForLife": {
          "type": "boolean",
          "description": "If present, will only be true and replaces disqualifiedUntil"
        },
        "eyesight": {
          "type": "string",
          "enum": [
            "Meets eyesight standard",
            "Meets higher eyesight standard",
            "Needs glasses/corrective lenses",
            "Needs glasses/corrective lenses for higher eyesight standard only"
          ],
          "description": "Meets eyesight standard"
        },
        "imagesExist": {
          "type": "boolean"
        },
        "disqualifiedPendingSentence": {
          "type": "boolean"
        },
        "retainedC1_D1Entitlement": {
          "type": "boolean"
        },
        "previousDrivingLicence": {
          "type": "array",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "previousDrivingLicenceNumber",
              "previousLastName",
              "previousFirstNames"
            ],
            "properties": {
              "previousDrivingLicenceNumber": {
                "type": "string",
                "example": "ABCDE123456AB1AB",
                "description": "A UK driving licence number"
              },
              "previousLastName": {
                "type": "string",
                "example": "Doe",
                "description": "last name of a driver"
              },
              "previousFirstNames": {
                "type": "string",
                "example": "John",
                "description": "first name(s) of a driver"
              },
              "previousDateOfBirth": {
                "type": "string",
                "format": "date",
                "maxLength": 10,
                "minLength": 10,
                "description": "Date in format YYYY-MM-DD",
                "example": "2019-12-31"
              }
            }
          }
        }
      }
    },
    "licence": {
      "type": "object",
      "additionalProperties": false,
      "description": "details of a drivers licence information",
      "required": [
        "type",
        "status"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "Provisional",
            "Full"
          ]
        },
        "status": {
          "type": "string",
          "enum": [
            "Valid",
            "Disqualified",
            "Revoked",
            "Revoked for medical reasons",
            "Surrendered voluntarily",
            "Surrendered for medical reasons",
            "Expired",
            "Exchanged",
            "Refused",
            "Refused for medical reasons"
          ],
          "description": "The current activation state of the licence"
        },
        "statusQualifier": {
          "type": "string",
          "description": "Information or restrictions relating to a Licence Status",
          "enum": [
            "For re-assessment only",
            "Photo licence invitation sent",
            "Short period disqualification",
            "Until test passed",
            "Until extended test passed",
            "Pending sentence",
            "For life"
          ]
        },
        "countryToWhichExchanged": {
          "type": "string",
          "example": "Wales",
          "description": "The country to which this licence was exchanged"
        }
      }
    },
    "entitlement": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "categoryCode",
          "categoryLegalLiteral",
          "categoryShortLiteral",
          "categoryType",
          "fromDate",
          "expiryDate",
          "categoryStatus"
        ],
        "properties": {
          "categoryCode": {
            "type": "string",
            "example": "Provisional",
            "description": "Licence category code"
          },
          "categoryLegalLiteral": {
            "type": "string",
            "example": "B1"
          },
          "categoryShortLiteral": {
            "type": "string",
            "example": "Light vehicles"
          },
          "categoryType": {
            "type": "string",
            "enum": [
              "Provisional",
              "Full"
            ]
          },
          "fromDate": {
            "type": "string",
            "format": "date",
            "maxLength": 10,
            "minLength": 10,
            "description": "Date in format YYYY-MM-DD",
            "example": "2019-12-31"
          },
          "expiryDate": {
            "type": "string",
            "format": "date",
            "maxLength": 10,
            "minLength": 10,
            "description": "Date in format YYYY-MM-DD",
            "example": "2019-12-31"
          },
          "categoryStatus": {
            "type": "string",
            "description": "The status of the category e.g. Valid, Revoked, Suspended",
            "enum": [
              "Valid",
              "Revoked",
              "Revoked until Test Pass",
              "Revoked for medical reasons",
              "Expired",
              "Surrendered",
              "Disqualified",
              "Disqualified until Test Pass",
              "Disqualified until Extended Test Pass",
              "Suspended",
              "122"
            ]
          },
          "restrictions": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "restrictionCode",
                "restrictionLiteral"
              ],
              "properties": {
                "restrictionCode": {
                  "type": "string",
                  "example": "01"
                },
                "restrictionLiteral": {
                  "type": "string",
                  "example": "Eyesight Correction"
                }
              }
            }
          },
          "restrictedToAutomaticTransmission": {
            "type": "boolean"
          },
          "fromNonGB": {
            "type": "boolean",
            "description": "Indicates if the category was assigned based on the entitlement from a non-GB licence during exchange"
          }
        }
      }
    },
    "testPass": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "type",
          "testDate",
          "status"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "Driving Licence",
              "Certificate of Professional Competency"
            ]
          },
          "categoryCode": {
            "type": "string",
            "example": "Provisional",
            "description": "Licence category code"
          },
          "categoryLegalLiteral": {
            "type": "string",
            "example": "B1"
          },
          "categoryShortLiteral": {
            "type": "string",
            "example": "Light vehicles"
          },
          "testDate": {
            "type": "string",
            "format": "date",
            "maxLength": 10,
            "minLength": 10,
            "description": "Date in format YYYY-MM-DD",
            "example": "2019-12-31"
          },
          "status": {
            "type": "string",
            "enum": [
              "claimed",
              "cancelled",
              "unclaimed"
            ]
          },
          "withAutomaticTransmission": {
            "type": "boolean",
            "description": "Denotes if the test was in an automatic transmission vehicle only"
          },
          "vehicleAdaptations": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Any adaptations that were in use during the test"
          },
          "withTrailer": {
            "type": "boolean",
            "description": "If a trailer was attached during the test"
          },
          "extendedTest": {
            "type": "boolean",
            "description": "If the test was extended following a DTETP"
          },
          "licenceSurrendered": {
            "type": "boolean",
            "description": "If the previous licence was surrendered following the test"
          },
          "testingAuthority": {
            "type": "string",
            "example": "DVSA",
            "description": "Who performed the test"
          }
        }
      }
    },
    "endorsements": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "offenceCode",
          "offenceLegalLiteral",
          "offenceDate",
          "expiryDate"
        ],
        "properties": {
          "offenceCode": {
            "type": "string",
            "example": "DD30",
            "description": "The code of the offence causing the endorsement"
          },
          "offenceLegalLiteral": {
            "type": "string"
          },
          "offenceDate": {
            "type": "string",
            "format": "date",
            "maxLength": 10,
            "minLength": 10,
            "description": "Date in format YYYY-MM-DD",
            "example": "2019-12-31"
          },
          "sentenceDate": {
            "type": "string",
            "format": "date",
            "maxLength": 10,
            "minLength": 10,
            "description": "Date in format YYYY-MM-DD",
            "example": "2019-12-31"
          },
          "penaltyPoints": {
            "type": "integer"
          },
          "fine": {
            "type": "number"
          },
          "disqualification": {
            "$ref": "#/components/schemas/disqualification"
          },
          "expiryDate": {
            "type": "string",
            "format": "date",
            "maxLength": 10,
            "minLength": 10,
            "description": "Date in format YYYY-MM-DD",
            "example": "2019-12-31"
          }
        }
      }
    },
    "tokenValidity": {
      "type": "object",
      "required": [
        "tokenValidFromDate",
        "tokenValidToDate",
        "tokenIssueNumber"
      ],
      "additionalProperties": false,
      "properties": {
        "tokenValidFromDate": {
          "type": "string",
          "format": "date",
          "maxLength": 10,
          "minLength": 10,
          "description": "Date in format YYYY-MM-DD",
          "example": "2019-12-31"
        },
        "tokenValidToDate": {
          "type": "string",
          "format": "date",
          "maxLength": 10,
          "minLength": 10,
          "description": "Date in format YYYY-MM-DD",
          "example": "2019-12-31"
        },
        "tokenIssueNumber": {
          "description": "The issue number of the token (between 01 and 99)",
          "type": "string",
          "example": "23"
        }
      }
    },
    "driverRedirect": {
      "type": "boolean",
      "description": "Indicates if record was redirected from cross reference record."
    }
  }
}
